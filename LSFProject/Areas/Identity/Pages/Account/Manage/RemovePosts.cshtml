@page
@inject UserManager<LSFProject.Areas.Identity.Data.LSFUser> UserManager
@using LSFProject
@model LSFProject.Areas.Identity.Pages.Account.Manage.RemovePosts
@{
    ViewData["Title"] = "Заблокированные посты";
}
<h2>@ViewData["Title"]</h2>
<partial name="_StatusMessage" model="Model.StatusMessage" />
<table class="table">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Автор</th>
            <th scope="col">Заголовок</th>
            <th scope="col">Коментарии</th>
            <th scope="col">Репосты</th>
            <th scope="col">Дата</th>
            <th scope="col">Просмотры</th>
            <th scope="col">Изображение</th>
            <th scope="col">Статус</th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var newsItem in Model.news)
        {
        <tr class="text-center">
            <th scope="row"><a href="@Url.Action("NewsDetails", "Home", new { url = newsItem.Url})">@newsItem.Id</a></th>
            <th><a href="@Url.Action("NewsDetails", "Home", new { url = newsItem.Url})">@UserManager.FindByIdAsync(newsItem.Author).Result.Email</a></th>
            <th><a href="@Url.Action("NewsDetails", "Home", new { url = newsItem.Url})">@newsItem.Header</a></th>
            <th><a href="@Url.Action("NewsDetails", "Home", new { url = newsItem.Url})">@Model.comments.Where(newss => newss.NewsId == newsItem.Id).ToList().Count()</a></th>
            <th><a href="@Url.Action("NewsDetails", "Home", new { url = newsItem.Url})">@newsItem.Share</a></th>
            <th><a href="@Url.Action("NewsDetails", "Home", new { url = newsItem.Url})">@newsItem.Date</a></th>
            <th><a href="@Url.Action("NewsDetails", "Home", new { url = newsItem.Url})">@newsItem.Watching</a></th>
            <th><a href="@Url.Action("NewsDetails", "Home", new { url = newsItem.Url})"><img src="@(Config.DomainName + Model.files.FirstOrDefault(p => p.Id == newsItem.PreviewPhoto))" width="50" height="40" /></a></th>
            <th>@newsItem.Status</th>
            <th scope="col"><a href="@Url.Action("NewsDetails", "Home", new { url = newsItem.Url})" class="text-primary">Просмотреть</a></th>
            <th scope="col">
                <a asp-page="./EditNews" asp-route-news="newsItem" asp-route-newsId="@newsItem.Id" class="text-warning">Изменить</a>
                <a asp-page-handler="PublishNews" asp-route-newsId="@newsItem.Id" class="text-success">Опубликовать</a>
                <a asp-page-handler="DeleteNews" asp-route-newsId="@newsItem.Id" class="text-danger">Удалить</a>
            </th>
        </tr>
        }
    </tbody>
</table>